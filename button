/ rename the objects "gon#sprite" to the names of the sprites in the code

local goput = require "click_game_object.goput"

local function random_position()
	local w = sys.get_config("display.width")
	local h = sys.get_config("display.height")
	return vmath.vector3(math.random(1, w), math.random(1, h), 0)
end

local function handle_click(url, action_id, action)
	if action.released then
		go.animate(url, "position", go.PLAYBACK_ONCE_FORWARD, random_position(), go.EASING_INOUTCIRC, 0.5)
	end
end

function init(self)
	msg.post(".", "acquire_input_focus")
	msg.post("@render:", "clear_color", { color = vmath.vector4(95 /256, 129 / 256, 161 / 256, 1 ) })
	go.set("go1#sprite", "scale", vmath.vector3(1.5, 1.5, 1))

	goput.add("go1#sprite", nil, handle_click)
	goput.add("go2#sprite", nil, handle_click)
	goput.add("go3#sprite", nil, handle_click)
	goput.add("go4#sprite", nil, handle_click)
end

function final(self)
	msg.post(".", "release_input_focus")
	goput.remove("go1#sprite")
	goput.remove("go2#sprite")
	goput.remove("go3#sprite")
	goput.remove("go4#sprite")
end

function on_input(self, action_id, action)
	return goput.on_input(action_id, action)
end


function init(self)
	msg.post(".", "acquire_input_focus") -- <1>
end

function on_input(self, action_id, action)
	if action_id == hash("touch") and action.pressed then -- <2>
		local button = gui.get_node("button") -- <3>
		local text = gui.get_node("text") -- <4>
		if gui.pick_node(button, action.x, action.y) then -- <5>
			gui.set_text(text, "HELLO!") -- <6>
		else
			gui.set_text(text, "CLICK ME!") -- <7>
		end
	end
end

--[[
1. Tell the engine that this game object wants to receive input.
2. If the user clicks.
3. Get the instance for the node named "button" (the button box).
4. Get the instance for the node named "text" (the button label).
5. Check if the click position (`action.x` and `action.y`) is within the boundaries of 
   the button node.
6. If the user clicks on the button, change the label text.
7. If the user clicks elsewhere, change the label text to something else.
--]]
